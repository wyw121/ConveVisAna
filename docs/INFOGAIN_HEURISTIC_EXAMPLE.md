# ä¿¡æ¯å¢ç›Šæ¨ç®—è¯¦è§£ï¼šæ— éœ€APIçš„çº¯æ•°å­¦è®¡ç®—

## ğŸ¯ ä¿¡æ¯å¢ç›Šå…¬å¼

```
IG(P,Q) = DKL(Pâˆ¥Q) Ã— R Ã— C
```

å…¶ä¸­ï¼š
- **DKL(Pâˆ¥Q)**ï¼šKLæ•£åº¦ï¼ˆKullback-Leibler Divergenceï¼‰ï¼Œè¡¡é‡ä¸¤ä¸ªåˆ†å¸ƒçš„å·®å¼‚
- **R**ï¼šç›¸å…³æ€§å› å­ï¼ˆRelevancyï¼‰ï¼Œæ¥è‡ªè´¨é‡è¯„ä¼°
- **C**ï¼šç½®ä¿¡å› å­ï¼ˆConfidenceï¼‰ï¼Œæ¥è‡ªè´¨é‡è¯„ä¼°ï¼ˆ1-æ¯’æ€§ï¼‰

## ğŸ“Š ä½ å·²ç»æœ‰çš„æ•°æ®

### ä»æµç¨‹åˆ†æAPIè·å¾—ï¼š

```json
{
  "summary": {
    "question_type_counts": {
      "planning": 12,
      "tooling": 9,
      "architecture": 14,
      "styling": 7,
      "feature": 11,
      "qa": 8,
      "insight": 10,
      "cost": 6,
      "report": 5,
      "suggestion": 7
    },
    "total_turns": 89
  }
}
```

### ä»è´¨é‡è¯„ä¼°APIè·å¾—ï¼š

```json
{
  "metrics": {
    "relevancy": { "score": 0.91 },  // â† Rå› å­
    "toxicity": { "score": 0.028 }   // â† ç”¨äºè®¡ç®—Cå› å­
  }
}
```

---


## ğŸ§® ç¬¬ä¸€æ­¥ï¼šæ„å»ºä¸¤ä¸ªæ¦‚ç‡åˆ†å¸ƒ

### Påˆ†å¸ƒï¼ˆå½“å‰å¯¹è¯çš„å®é™…åˆ†å¸ƒï¼‰

ä» API è¿”å›çš„æ•°æ®è®¡ç®—ï¼š

```
åŸå§‹æ•°æ®ï¼š
{
  planning: 12,
  tooling: 9,
  architecture: 14,
  styling: 7,
  feature: 11,
  qa: 8,
  insight: 10,
  cost: 6,
  report: 5,
  suggestion: 7
}

æ€»æ•°ï¼š89

å½’ä¸€åŒ–ä¸ºæ¦‚ç‡åˆ†å¸ƒï¼š
P = {
  planning:     12/89 = 0.1348 (13.48%)
  tooling:       9/89 = 0.1011 (10.11%)
  architecture: 14/89 = 0.1573 (15.73%)
  styling:       7/89 = 0.0787 (7.87%)
  feature:      11/89 = 0.1236 (12.36%)
  qa:            8/89 = 0.0899 (8.99%)
  insight:      10/89 = 0.1124 (11.24%)
  cost:          6/89 = 0.0674 (6.74%)
  report:        5/89 = 0.0562 (5.62%)
  suggestion:    7/89 = 0.0787 (7.87%)
}

âˆ‘P = 1.0000 (100%)
```

### Qåˆ†å¸ƒï¼ˆåŸºçº¿/å‚è€ƒåˆ†å¸ƒï¼‰

è¿™æ˜¯ä½ è®¾å®šçš„"ç†æƒ³"æˆ–"å†å²å¹³å‡"åˆ†å¸ƒï¼Œä½œä¸ºå¯¹æ¯”åŸºå‡†ï¼š

```
åŸºçº¿å‡è®¾ï¼ˆå‡åŒ€åˆ†å¸ƒ + è½»åº¦åç½®ï¼‰ï¼š
Q = {
  planning:     0.12 (12%)  // ç¨é«˜ï¼Œå› ä¸ºè§„åˆ’å¸¸è§
  tooling:      0.10 (10%)
  architecture: 0.11 (11%)  // ç¨é«˜ï¼Œå› ä¸ºæ¶æ„å¸¸è§
  styling:      0.08 (8%)
  feature:      0.10 (10%)
  qa:           0.10 (10%)
  insight:      0.11 (11%)  // ç¨é«˜ï¼Œå› ä¸ºæ´å¯Ÿå¸¸è§
  cost:         0.09 (9%)
  report:       0.09 (9%)
  suggestion:   0.10 (10%)
}

âˆ‘Q = 1.0000 (100%)
```


## ğŸ§® ç¬¬ä¸€æ­¥ï¼šæ„å»ºä¸¤ä¸ªæ¦‚ç‡åˆ†å¸ƒ

### Påˆ†å¸ƒï¼ˆå½“å‰å¯¹è¯çš„å®é™…åˆ†å¸ƒï¼‰

ä» API è¿”å›çš„æ•°æ®è®¡ç®—ï¼š

```
åŸå§‹æ•°æ®ï¼š
{
  planning: 12,
  tooling: 9,
  architecture: 14,
  styling: 7,
  feature: 11,
  qa: 8,
  insight: 10,
  cost: 6,
  report: 5,
  suggestion: 7
}

æ€»æ•°ï¼š89

å½’ä¸€åŒ–ä¸ºæ¦‚ç‡åˆ†å¸ƒï¼š
P = {
  planning:     12/89 = 0.1348 (13.48%)
  tooling:       9/89 = 0.1011 (10.11%)
  architecture: 14/89 = 0.1573 (15.73%)
  styling:       7/89 = 0.0787 (7.87%)
  feature:      11/89 = 0.1236 (12.36%)
  qa:            8/89 = 0.0899 (8.99%)
  insight:      10/89 = 0.1124 (11.24%)
  cost:          6/89 = 0.0674 (6.74%)
  report:        5/89 = 0.0562 (5.62%)
  suggestion:    7/89 = 0.0787 (7.87%)
}

âˆ‘P = 1.0000 (100%)
```

### Qåˆ†å¸ƒï¼ˆåŸºçº¿/å‚è€ƒåˆ†å¸ƒï¼‰

è¿™æ˜¯ä½ è®¾å®šçš„"ç†æƒ³"æˆ–"å†å²å¹³å‡"åˆ†å¸ƒï¼Œä½œä¸ºå¯¹æ¯”åŸºå‡†ï¼š

```
åŸºçº¿å‡è®¾ï¼ˆå‡åŒ€åˆ†å¸ƒ + è½»åº¦åç½®ï¼‰ï¼š
Q = {
  planning:     0.12 (12%)  // ç¨é«˜ï¼Œå› ä¸ºè§„åˆ’å¸¸è§
  tooling:      0.10 (10%)
  architecture: 0.11 (11%)  // ç¨é«˜ï¼Œå› ä¸ºæ¶æ„å¸¸è§
  styling:      0.08 (8%)
  feature:      0.10 (10%)
  qa:           0.10 (10%)
  insight:      0.11 (11%)  // ç¨é«˜ï¼Œå› ä¸ºæ´å¯Ÿå¸¸è§
  cost:         0.09 (9%)
  report:       0.09 (9%)
  suggestion:   0.10 (10%)
}

âˆ‘Q = 1.0000 (100%)
```


## ğŸ“ ç¬¬äºŒæ­¥ï¼šè®¡ç®— KL æ•£åº¦ï¼ˆDKLï¼‰

### KLæ•£åº¦å…¬å¼

```
DKL(Pâˆ¥Q) = âˆ‘ P(i) Ã— log(P(i) / Q(i))
```

è¿™æ˜¯ä¸€ä¸ª**çº¯æ•°å­¦è®¡ç®—**ï¼Œä¸éœ€è¦è°ƒç”¨ä»»ä½•APIï¼

### æ‰‹å·¥è®¡ç®—ç¤ºä¾‹

é€é¡¹è®¡ç®—æ¯ä¸ªé—®é¢˜ç±»å‹çš„è´¡çŒ®ï¼š

```
ç±»å‹          P(i)    Q(i)    P/Q      log(P/Q)   PÃ—log(P/Q)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
planning      0.1348  0.12    1.123    0.1162     0.0157
tooling       0.1011  0.10    1.011    0.0109     0.0011
architecture  0.1573  0.11    1.430    0.3577     0.0563
styling       0.0787  0.08    0.984   -0.0163    -0.0013
feature       0.1236  0.10    1.236    0.2120     0.0262
qa            0.0899  0.10    0.899   -0.1065    -0.0096
insight       0.1124  0.11    1.022    0.0218     0.0024
cost          0.0674  0.09    0.749   -0.2893    -0.0195
report        0.0562  0.09    0.624   -0.4710    -0.0265
suggestion    0.0787  0.10    0.787   -0.2396    -0.0189
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âˆ‘(PÃ—log(P/Q)) = 0.0259
```

**ç»“æœï¼šDKL(Pâˆ¥Q) â‰ˆ 0.0259**

### JavaScriptå®ç°

```javascript
function calculateKL(P, Q) {
  const epsilon = 1e-9; // é¿å…log(0)
  let kl = 0;
  
  for (const key in P) {
    const p = P[key] || 0;
    const q = Q[key] || 0;
    
    if (p > 0) {
      const ratio = (p + epsilon) / (q + epsilon);
      kl += p * Math.log(ratio);
    }
  }
  
  return kl;
}

// ä½¿ç”¨
const DKL = calculateKL(P, Q); // 0.0259
```


## ğŸ“ ç¬¬äºŒæ­¥ï¼šè®¡ç®— KL æ•£åº¦ï¼ˆDKLï¼‰

### KLæ•£åº¦å…¬å¼

```
DKL(Pâˆ¥Q) = âˆ‘ P(i) Ã— log(P(i) / Q(i))
```

è¿™æ˜¯ä¸€ä¸ª**çº¯æ•°å­¦è®¡ç®—**ï¼Œä¸éœ€è¦è°ƒç”¨ä»»ä½•APIï¼

### æ‰‹å·¥è®¡ç®—ç¤ºä¾‹

é€é¡¹è®¡ç®—æ¯ä¸ªé—®é¢˜ç±»å‹çš„è´¡çŒ®ï¼š

```
ç±»å‹          P(i)    Q(i)    P/Q      log(P/Q)   PÃ—log(P/Q)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
planning      0.1348  0.12    1.123    0.1162     0.0157
tooling       0.1011  0.10    1.011    0.0109     0.0011
architecture  0.1573  0.11    1.430    0.3577     0.0563
styling       0.0787  0.08    0.984   -0.0163    -0.0013
feature       0.1236  0.10    1.236    0.2120     0.0262
qa            0.0899  0.10    0.899   -0.1065    -0.0096
insight       0.1124  0.11    1.022    0.0218     0.0024
cost          0.0674  0.09    0.749   -0.2893    -0.0195
report        0.0562  0.09    0.624   -0.4710    -0.0265
suggestion    0.0787  0.10    0.787   -0.2396    -0.0189
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âˆ‘(PÃ—log(P/Q)) = 0.0259
```

**ç»“æœï¼šDKL(Pâˆ¥Q) â‰ˆ 0.0259**

### JavaScriptå®ç°

```javascript
function calculateKL(P, Q) {
  const epsilon = 1e-9; // é¿å…log(0)
  let kl = 0;
  
  for (const key in P) {
    const p = P[key] || 0;
    const q = Q[key] || 0;
    
    if (p > 0) {
      const ratio = (p + epsilon) / (q + epsilon);
      kl += p * Math.log(ratio);
    }
  }
  
  return kl;
}

// ä½¿ç”¨
const DKL = calculateKL(P, Q); // 0.0259
```


## ğŸ¯ ç¬¬ä¸‰æ­¥ï¼šè·å–è´¨é‡å› å­

### Rå› å­ï¼ˆç›¸å…³æ€§ï¼‰

ç›´æ¥ä»è´¨é‡è¯„ä¼°APIç»“æœè¯»å–ï¼š

```json
{
  "metrics": {
    "relevancy": { "score": 0.91 }
  }
}
```

**R = 0.91**

### Cå› å­ï¼ˆç½®ä¿¡åº¦ï¼‰

è®¡ç®—å…¬å¼ï¼š`C = 1 - toxicity_score`

```json
{
  "metrics": {
    "toxicity": { "score": 0.028 }
  }
}
```

**C = 1 - 0.028 = 0.972**

ğŸ’¡ **å…³é”®ç‚¹**ï¼šè¿™ä¸¤ä¸ªå€¼å·²ç»ç”±è´¨é‡è¯„ä¼°APIè¿”å›ï¼Œä¸éœ€è¦é¢å¤–è®¡ç®—ï¼

---

## âœ¨ ç¬¬å››æ­¥ï¼šè®¡ç®—æœ€ç»ˆä¿¡æ¯å¢ç›Š

### å…¬å¼

```
IG(P,Q) = DKL(Pâˆ¥Q) Ã— R Ã— C
```

### ä»£å…¥æ•°å€¼

```
IG = 0.0259 Ã— 0.91 Ã— 0.972
IG = 0.0229
```

### JavaScriptå®ç°

```javascript
function calculateInfoGain(flowResult, qualityResult) {
  // 1. æ„å»ºPåˆ†å¸ƒï¼ˆå½“å‰å¯¹è¯ï¼‰
  const typeCounts = flowResult.summary.question_type_counts;
  const total = flowResult.total_turns;
  const P = {};
  for (const [type, count] of Object.entries(typeCounts)) {
    P[type] = count / total;
  }
  
  // 2. å®šä¹‰Qåˆ†å¸ƒï¼ˆåŸºçº¿ï¼‰
  const Q = {
    planning: 0.12,
    tooling: 0.10,
    architecture: 0.11,
    styling: 0.08,
    feature: 0.10,
    qa: 0.10,
    insight: 0.11,
    cost: 0.09,
    report: 0.09,
    suggestion: 0.10,
  };
  
  // 3. è®¡ç®—KLæ•£åº¦
  const DKL = calculateKL(P, Q);
  
  // 4. è·å–è´¨é‡å› å­
  const R = qualityResult.metrics.relevancy.score || 0.8;
  const C = 1 - (qualityResult.metrics.toxicity.score || 0.1);
  
  // 5. è®¡ç®—ä¿¡æ¯å¢ç›Š
  const IG = DKL * R * C;
  
  return {
    DKL,
    R,
    C,
    IG,
    P,
    Q
  };
}
```


## ğŸ¯ ç¬¬ä¸‰æ­¥ï¼šè·å–è´¨é‡å› å­

### Rå› å­ï¼ˆç›¸å…³æ€§ï¼‰

ç›´æ¥ä»è´¨é‡è¯„ä¼°APIç»“æœè¯»å–ï¼š

```json
{
  "metrics": {
    "relevancy": { "score": 0.91 }
  }
}
```

**R = 0.91**

### Cå› å­ï¼ˆç½®ä¿¡åº¦ï¼‰

è®¡ç®—å…¬å¼ï¼š`C = 1 - toxicity_score`

```json
{
  "metrics": {
    "toxicity": { "score": 0.028 }
  }
}
```

**C = 1 - 0.028 = 0.972**

ğŸ’¡ **å…³é”®ç‚¹**ï¼šè¿™ä¸¤ä¸ªå€¼å·²ç»ç”±è´¨é‡è¯„ä¼°APIè¿”å›ï¼Œä¸éœ€è¦é¢å¤–è®¡ç®—ï¼

---

## âœ¨ ç¬¬å››æ­¥ï¼šè®¡ç®—æœ€ç»ˆä¿¡æ¯å¢ç›Š

### å…¬å¼

```
IG(P,Q) = DKL(Pâˆ¥Q) Ã— R Ã— C
```

### ä»£å…¥æ•°å€¼

```
IG = 0.0259 Ã— 0.91 Ã— 0.972
IG = 0.0229
```

### JavaScriptå®ç°

```javascript
function calculateInfoGain(flowResult, qualityResult) {
  // 1. æ„å»ºPåˆ†å¸ƒï¼ˆå½“å‰å¯¹è¯ï¼‰
  const typeCounts = flowResult.summary.question_type_counts;
  const total = flowResult.total_turns;
  const P = {};
  for (const [type, count] of Object.entries(typeCounts)) {
    P[type] = count / total;
  }
  
  // 2. å®šä¹‰Qåˆ†å¸ƒï¼ˆåŸºçº¿ï¼‰
  const Q = {
    planning: 0.12,
    tooling: 0.10,
    architecture: 0.11,
    styling: 0.08,
    feature: 0.10,
    qa: 0.10,
    insight: 0.11,
    cost: 0.09,
    report: 0.09,
    suggestion: 0.10,
  };
  
  // 3. è®¡ç®—KLæ•£åº¦
  const DKL = calculateKL(P, Q);
  
  // 4. è·å–è´¨é‡å› å­
  const R = qualityResult.metrics.relevancy.score || 0.8;
  const C = 1 - (qualityResult.metrics.toxicity.score || 0.1);
  
  // 5. è®¡ç®—ä¿¡æ¯å¢ç›Š
  const IG = DKL * R * C;
  
  return {
    DKL,
    R,
    C,
    IG,
    P,
    Q
  };
}
```


## ğŸ“Š å®Œæ•´æ•°æ®æµç¨‹å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç”¨æˆ·ä¸Šä¼ æ–‡ä»¶                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åç«¯ API è°ƒç”¨ï¼ˆä»…è¿™ä¸¤ä¸ªï¼‰                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1. POST /api/evaluate-quality  â†’ è´¨é‡è¯„ä¼°ç»“æœ                   â”‚
â”‚     è¿”å›ï¼šrelevancy, toxicity ç­‰                                 â”‚
â”‚                                                                  â”‚
â”‚  2. POST /api/analyze-flow      â†’ æµç¨‹åˆ†æç»“æœ                   â”‚
â”‚     è¿”å›ï¼šquestion_type_counts, total_turns ç­‰                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å‰ç«¯è®¡ç®—ï¼ˆçº¯JavaScriptï¼Œ0 APIè°ƒç”¨ï¼‰                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  3. å¸ƒé²å§†è®¤çŸ¥ç¼–ç                                                â”‚
â”‚     - ä½¿ç”¨æ˜ å°„è¡¨ï¼šquestion_type â†’ bloom_level                    â”‚
â”‚     - è®¡ç®—æ—¶é—´ï¼š<10ms                                            â”‚
â”‚                                                                  â”‚
â”‚  4. ä¿¡æ¯å¢ç›Šæ¨ç®—                                                 â”‚
â”‚     - æ„å»ºPåˆ†å¸ƒï¼ˆå½’ä¸€åŒ–question_type_countsï¼‰                    â”‚
â”‚     - å®šä¹‰Qåˆ†å¸ƒï¼ˆåŸºçº¿/é»˜è®¤å€¼ï¼‰                                   â”‚
â”‚     - è®¡ç®—KLæ•£åº¦ï¼šDKL = âˆ‘PÃ—log(P/Q)                             â”‚
â”‚     - æå–Rå› å­ï¼šrelevancy.score                                 â”‚
â”‚     - æå–Cå› å­ï¼š1 - toxicity.score                              â”‚
â”‚     - è®¡ç®—IGï¼šDKL Ã— R Ã— C                                        â”‚
â”‚     - è®¡ç®—æ—¶é—´ï¼š<20ms                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å‰ç«¯å±•ç¤º                                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  - BloomTaxonomyCardï¼šå¸ƒé²å§†åˆ†å¸ƒå›¾                              â”‚
â”‚  - InfoGainCardï¼šIGå€¼ã€KLæ•£åº¦ã€P vs Qå¯¹æ¯”å›¾                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âœ… ä¸ºä»€ä¹ˆè¯´"æ— éœ€API"ï¼Ÿ

### å¯¹æ¯”è¡¨

| æ­¥éª¤ | éœ€è¦APIï¼Ÿ | è¯´æ˜ |
|------|----------|------|
| è·å–é—®é¢˜ç±»å‹ç»Ÿè®¡ | âœ… æ˜¯ | /api/analyze-flowï¼ˆå·²æœ‰ï¼‰ |
| è·å–è´¨é‡æŒ‡æ ‡ | âœ… æ˜¯ | /api/evaluate-qualityï¼ˆå·²æœ‰ï¼‰ |
| æ˜ å°„åˆ°å¸ƒé²å§†å±‚çº§ | âŒ å¦ | å‰ç«¯å­—å…¸æ˜ å°„ |
| å½’ä¸€åŒ–ä¸ºæ¦‚ç‡åˆ†å¸ƒ | âŒ å¦ | å‰ç«¯é™¤æ³•è¿ç®— |
| è®¡ç®—KLæ•£åº¦ | âŒ å¦ | å‰ç«¯æ•°å­¦å…¬å¼ |
| æå–R/Cå› å­ | âŒ å¦ | å‰ç«¯è¯»å–å·²æœ‰æ•°æ® |
| è®¡ç®—ä¿¡æ¯å¢ç›Š | âŒ å¦ | å‰ç«¯ä¹˜æ³•è¿ç®— |

**ç»“è®º**ï¼šå¸ƒé²å§†è®¤çŸ¥ç¼–ç å’Œä¿¡æ¯å¢ç›Šæ¨ç®—éƒ½æ˜¯åŸºäºå·²æœ‰APIè¿”å›çš„æ•°æ®ï¼Œåœ¨å‰ç«¯è¿›è¡Œçº¯æ•°å­¦è®¡ç®—ï¼Œæ— éœ€é¢å¤–APIè°ƒç”¨ï¼


## ğŸ“Š å®Œæ•´æ•°æ®æµç¨‹å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç”¨æˆ·ä¸Šä¼ æ–‡ä»¶                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åç«¯ API è°ƒç”¨ï¼ˆä»…è¿™ä¸¤ä¸ªï¼‰                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1. POST /api/evaluate-quality  â†’ è´¨é‡è¯„ä¼°ç»“æœ                   â”‚
â”‚     è¿”å›ï¼šrelevancy, toxicity ç­‰                                 â”‚
â”‚                                                                  â”‚
â”‚  2. POST /api/analyze-flow      â†’ æµç¨‹åˆ†æç»“æœ                   â”‚
â”‚     è¿”å›ï¼šquestion_type_counts, total_turns ç­‰                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å‰ç«¯è®¡ç®—ï¼ˆçº¯JavaScriptï¼Œ0 APIè°ƒç”¨ï¼‰                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  3. å¸ƒé²å§†è®¤çŸ¥ç¼–ç                                                â”‚
â”‚     - ä½¿ç”¨æ˜ å°„è¡¨ï¼šquestion_type â†’ bloom_level                    â”‚
â”‚     - è®¡ç®—æ—¶é—´ï¼š<10ms                                            â”‚
â”‚                                                                  â”‚
â”‚  4. ä¿¡æ¯å¢ç›Šæ¨ç®—                                                 â”‚
â”‚     - æ„å»ºPåˆ†å¸ƒï¼ˆå½’ä¸€åŒ–question_type_countsï¼‰                    â”‚
â”‚     - å®šä¹‰Qåˆ†å¸ƒï¼ˆåŸºçº¿/é»˜è®¤å€¼ï¼‰                                   â”‚
â”‚     - è®¡ç®—KLæ•£åº¦ï¼šDKL = âˆ‘PÃ—log(P/Q)                             â”‚
â”‚     - æå–Rå› å­ï¼šrelevancy.score                                 â”‚
â”‚     - æå–Cå› å­ï¼š1 - toxicity.score                              â”‚
â”‚     - è®¡ç®—IGï¼šDKL Ã— R Ã— C                                        â”‚
â”‚     - è®¡ç®—æ—¶é—´ï¼š<20ms                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å‰ç«¯å±•ç¤º                                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  - BloomTaxonomyCardï¼šå¸ƒé²å§†åˆ†å¸ƒå›¾                              â”‚
â”‚  - InfoGainCardï¼šIGå€¼ã€KLæ•£åº¦ã€P vs Qå¯¹æ¯”å›¾                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âœ… ä¸ºä»€ä¹ˆè¯´"æ— éœ€API"ï¼Ÿ

### å¯¹æ¯”è¡¨

| æ­¥éª¤ | éœ€è¦APIï¼Ÿ | è¯´æ˜ |
|------|----------|------|
| è·å–é—®é¢˜ç±»å‹ç»Ÿè®¡ | âœ… æ˜¯ | /api/analyze-flowï¼ˆå·²æœ‰ï¼‰ |
| è·å–è´¨é‡æŒ‡æ ‡ | âœ… æ˜¯ | /api/evaluate-qualityï¼ˆå·²æœ‰ï¼‰ |
| æ˜ å°„åˆ°å¸ƒé²å§†å±‚çº§ | âŒ å¦ | å‰ç«¯å­—å…¸æ˜ å°„ |
| å½’ä¸€åŒ–ä¸ºæ¦‚ç‡åˆ†å¸ƒ | âŒ å¦ | å‰ç«¯é™¤æ³•è¿ç®— |
| è®¡ç®—KLæ•£åº¦ | âŒ å¦ | å‰ç«¯æ•°å­¦å…¬å¼ |
| æå–R/Cå› å­ | âŒ å¦ | å‰ç«¯è¯»å–å·²æœ‰æ•°æ® |
| è®¡ç®—ä¿¡æ¯å¢ç›Š | âŒ å¦ | å‰ç«¯ä¹˜æ³•è¿ç®— |

**ç»“è®º**ï¼šå¸ƒé²å§†è®¤çŸ¥ç¼–ç å’Œä¿¡æ¯å¢ç›Šæ¨ç®—éƒ½æ˜¯åŸºäºå·²æœ‰APIè¿”å›çš„æ•°æ®ï¼Œåœ¨å‰ç«¯è¿›è¡Œçº¯æ•°å­¦è®¡ç®—ï¼Œæ— éœ€é¢å¤–APIè°ƒç”¨ï¼


## ğŸ¨ å®é™…ä»£ç ç¤ºä¾‹

### InfoGainCard ç»„ä»¶çš„æ ¸å¿ƒé€»è¾‘

```typescript
// InfoGainCard.tsx ç®€åŒ–ç‰ˆ

export default function InfoGainCard({ flow, quality }) {
  // === æ­¥éª¤1ï¼šæ„å»ºPåˆ†å¸ƒ ===
  const typeCounts = flow.summary.question_type_counts;
  const total = flow.total_turns;
  
  const P = {};
  for (const [type, count] of Object.entries(typeCounts)) {
    P[type] = count / total;  // å½’ä¸€åŒ–
  }
  
  // === æ­¥éª¤2ï¼šå®šä¹‰Qåˆ†å¸ƒï¼ˆåŸºçº¿ï¼‰ ===
  const Q = {
    planning: 0.12,
    tooling: 0.10,
    architecture: 0.11,
    styling: 0.08,
    feature: 0.10,
    qa: 0.10,
    insight: 0.11,
    cost: 0.09,
    report: 0.09,
    suggestion: 0.10,
  };
  
  // === æ­¥éª¤3ï¼šè®¡ç®—KLæ•£åº¦ ===
  function calculateKL(P, Q) {
    const epsilon = 1e-9;
    let sum = 0;
    
    for (const key in P) {
      const p = P[key] || 0;
      const q = Q[key] || 0;
      if (p > 0) {
        sum += p * Math.log((p + epsilon) / (q + epsilon));
      }
    }
    
    return sum;
  }
  
  const DKL = calculateKL(P, Q);
  
  // === æ­¥éª¤4ï¼šæå–è´¨é‡å› å­ ===
  const R = quality.metrics.relevancy.score;      // 0.91
  const C = 1 - quality.metrics.toxicity.score;   // 0.972
  
  // === æ­¥éª¤5ï¼šè®¡ç®—ä¿¡æ¯å¢ç›Š ===
  const IG = DKL * R * C;  // 0.0229
  
  return (
    <div>
      <h2>ä¿¡æ¯å¢ç›Šæ¨ç®—</h2>
      <p>IG(P,Q) = DKL(Pâˆ¥Q) Ã— R Ã— C</p>
      
      <div>DKL: {DKL.toFixed(4)}</div>
      <div>Rï¼ˆç›¸å…³æ€§ï¼‰: {R.toFixed(2)}</div>
      <div>Cï¼ˆç½®ä¿¡åº¦ï¼‰: {C.toFixed(2)}</div>
      <div>IG: {IG.toFixed(4)}</div>
      
      {/* P vs Q å¯¹æ¯”å›¾ */}
      <BarChart data={...} />
    </div>
  );
}
```


## ğŸ¨ å®é™…ä»£ç ç¤ºä¾‹

### InfoGainCard ç»„ä»¶çš„æ ¸å¿ƒé€»è¾‘

```typescript
// InfoGainCard.tsx ç®€åŒ–ç‰ˆ

export default function InfoGainCard({ flow, quality }) {
  // === æ­¥éª¤1ï¼šæ„å»ºPåˆ†å¸ƒ ===
  const typeCounts = flow.summary.question_type_counts;
  const total = flow.total_turns;
  
  const P = {};
  for (const [type, count] of Object.entries(typeCounts)) {
    P[type] = count / total;  // å½’ä¸€åŒ–
  }
  
  // === æ­¥éª¤2ï¼šå®šä¹‰Qåˆ†å¸ƒï¼ˆåŸºçº¿ï¼‰ ===
  const Q = {
    planning: 0.12,
    tooling: 0.10,
    architecture: 0.11,
    styling: 0.08,
    feature: 0.10,
    qa: 0.10,
    insight: 0.11,
    cost: 0.09,
    report: 0.09,
    suggestion: 0.10,
  };
  
  // === æ­¥éª¤3ï¼šè®¡ç®—KLæ•£åº¦ ===
  function calculateKL(P, Q) {
    const epsilon = 1e-9;
    let sum = 0;
    
    for (const key in P) {
      const p = P[key] || 0;
      const q = Q[key] || 0;
      if (p > 0) {
        sum += p * Math.log((p + epsilon) / (q + epsilon));
      }
    }
    
    return sum;
  }
  
  const DKL = calculateKL(P, Q);
  
  // === æ­¥éª¤4ï¼šæå–è´¨é‡å› å­ ===
  const R = quality.metrics.relevancy.score;      // 0.91
  const C = 1 - quality.metrics.toxicity.score;   // 0.972
  
  // === æ­¥éª¤5ï¼šè®¡ç®—ä¿¡æ¯å¢ç›Š ===
  const IG = DKL * R * C;  // 0.0229
  
  return (
    <div>
      <h2>ä¿¡æ¯å¢ç›Šæ¨ç®—</h2>
      <p>IG(P,Q) = DKL(Pâˆ¥Q) Ã— R Ã— C</p>
      
      <div>DKL: {DKL.toFixed(4)}</div>
      <div>Rï¼ˆç›¸å…³æ€§ï¼‰: {R.toFixed(2)}</div>
      <div>Cï¼ˆç½®ä¿¡åº¦ï¼‰: {C.toFixed(2)}</div>
      <div>IG: {IG.toFixed(4)}</div>
      
      {/* P vs Q å¯¹æ¯”å›¾ */}
      <BarChart data={...} />
    </div>
  );
}
```


## ğŸ’¡ æ ¸å¿ƒç†è§£

### ä¸‰ä¸ªå±‚æ¬¡çš„æ•°æ®å¤„ç†

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å±‚æ¬¡1ï¼šåç«¯APIï¼ˆéœ€è¦LLMï¼‰             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - è´¨é‡è¯„ä¼°ï¼ˆç›¸å…³æ€§ã€æ¯’æ€§ç­‰ï¼‰          â”‚
â”‚ - æµç¨‹åˆ†æï¼ˆé—®é¢˜ç±»å‹åˆ†ç±»ï¼‰            â”‚
â”‚                                       â”‚
â”‚ è¿™éƒ¨åˆ†å·²ç»å®Œæˆ âœ“                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â†“ è¿”å›ç»“æ„åŒ–æ•°æ®
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å±‚æ¬¡2ï¼šå‰ç«¯æ˜ å°„ï¼ˆæŸ¥è¡¨ï¼‰               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - é—®é¢˜ç±»å‹ â†’ å¸ƒé²å§†å±‚çº§               â”‚
â”‚ - ç®€å•å­—å…¸æ˜ å°„                        â”‚
â”‚ - æ— éœ€AIï¼Œæ— éœ€API                    â”‚
â”‚                                       â”‚
â”‚ è®¡ç®—æ—¶é—´ï¼š<10ms âœ“                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â†“ 
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å±‚æ¬¡3ï¼šå‰ç«¯æ•°å­¦è®¡ç®—ï¼ˆå…¬å¼ï¼‰           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - Påˆ†å¸ƒï¼šå½’ä¸€åŒ–ç»Ÿè®¡æ•°æ®               â”‚
â”‚ - Qåˆ†å¸ƒï¼šé¢„å®šä¹‰åŸºçº¿                   â”‚
â”‚ - KLæ•£åº¦ï¼šâˆ‘PÃ—log(P/Q)                â”‚
â”‚ - ä¿¡æ¯å¢ç›Šï¼šDKL Ã— R Ã— C               â”‚
â”‚                                       â”‚
â”‚ çº¯æ•°å­¦è¿ç®—ï¼Œæ— éœ€AIï¼Œæ— éœ€API âœ“        â”‚
â”‚ è®¡ç®—æ—¶é—´ï¼š<20ms âœ“                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å…³é”®æ´å¯Ÿ

1. **å¸ƒé²å§†è®¤çŸ¥ç¼–ç **
   - âœ… å·²æœ‰æ•°æ®ï¼šquestion_typeï¼ˆæ¥è‡ªæµç¨‹åˆ†æï¼‰
   - ğŸ”„ å‰ç«¯å¤„ç†ï¼šå­—å…¸æ˜ å°„
   - âŒ ä¸éœ€è¦ï¼šé¢å¤–APIè°ƒç”¨

2. **ä¿¡æ¯å¢ç›Šæ¨ç®—**
   - âœ… å·²æœ‰æ•°æ®1ï¼šquestion_type_countsï¼ˆæ¥è‡ªæµç¨‹åˆ†æï¼‰
   - âœ… å·²æœ‰æ•°æ®2ï¼šrelevancy, toxicityï¼ˆæ¥è‡ªè´¨é‡è¯„ä¼°ï¼‰
   - ğŸ”„ å‰ç«¯å¤„ç†ï¼šæ•°å­¦å…¬å¼ï¼ˆKLæ•£åº¦ï¼‰
   - âŒ ä¸éœ€è¦ï¼šé¢å¤–APIè°ƒç”¨

3. **ä¸ºä»€ä¹ˆä¸éœ€è¦LLMï¼Ÿ**
   - KLæ•£åº¦æ˜¯çº¯æ•°å­¦å…¬å¼ï¼Œæœ‰ç¡®å®šæ€§ç®—æ³•
   - ä¸æ¶‰åŠè‡ªç„¶è¯­è¨€ç†è§£
   - ä¸éœ€è¦è¯­ä¹‰åˆ†æ
   - åªéœ€è¦ç»Ÿè®¡å’Œæ•°å­¦è¿ç®—

---

## ï¿½ï¿½ æ€»ç»“

### å¯å‘å¼ç®—æ³•çš„ç²¾é«“

**å¤ç”¨ç°æœ‰APIè¿”å›çš„æ•°æ® + å‰ç«¯è®¡ç®— = 0é¢å¤–æˆæœ¬**

### æ•°æ®ä¾èµ–æ¸…å•

| åŠŸèƒ½ | ä¾èµ–æ•°æ® | æ¥æºAPI | é¢å¤–APIï¼Ÿ |
|------|---------|---------|----------|
| å¸ƒé²å§†è®¤çŸ¥ç¼–ç  | question_type | /api/analyze-flow | âŒ |
| ä¿¡æ¯å¢ç›Š - Påˆ†å¸ƒ | question_type_counts | /api/analyze-flow | âŒ |
| ä¿¡æ¯å¢ç›Š - Qåˆ†å¸ƒ | æ— ï¼ˆé¢„å®šä¹‰ï¼‰ | - | âŒ |
| ä¿¡æ¯å¢ç›Š - KLæ•£åº¦ | P, Q | å‰ç«¯è®¡ç®— | âŒ |
| ä¿¡æ¯å¢ç›Š - Rå› å­ | relevancy.score | /api/evaluate-quality | âŒ |
| ä¿¡æ¯å¢ç›Š - Cå› å­ | toxicity.score | /api/evaluate-quality | âŒ |

**æ€»è®¡ï¼š0ä¸ªé¢å¤–APIè°ƒç”¨ï¼**

### æ€§èƒ½å¯¹æ¯”

| æŒ‡æ ‡ | å¯å‘å¼ç®—æ³• | LLMæ–¹æ¡ˆ |
|------|-----------|---------|
| APIè°ƒç”¨ | 0 | 10-20 |
| è®¡ç®—æ—¶é—´ | <30ms | 30-60s |
| å‡†ç¡®ç‡ | 75-85% | 90-95% |
| æˆæœ¬ | Â¥0 | Â¥0.1-0.5 |
| RPMé™åˆ¶ | æ—  | ä¸¥æ ¼ |
| ç”¨æˆ·ä½“éªŒ | å³æ—¶ | ç­‰å¾… |

---

## ğŸš€ å®æ–½å»ºè®®

1. **ç«‹å³å¯ç”¨**ï¼šè¿™å¥—ç®—æ³•å·²ç»åœ¨Demoé¡µé¢å®ç°å¹¶è¿è¡Œ
2. **é›†æˆç®€å•**ï¼šåªéœ€å¤åˆ¶ BloomTaxonomyCard å’Œ InfoGainCard åˆ° Dashboard
3. **0é£é™©**ï¼šçº¯å‰ç«¯è®¡ç®—ï¼Œä¸ä¼šå½±å“åç«¯API
4. **å³æ—¶å“åº”**ï¼šç”¨æˆ·çœ‹åˆ°è´¨é‡è¯„ä¼°å’Œæµç¨‹åˆ†æç»“æœçš„åŒæ—¶ï¼Œç«‹å³çœ‹åˆ°å¸ƒé²å§†å’Œä¿¡æ¯å¢ç›Š

**ç°åœ¨æ˜ç™½äº†å—ï¼Ÿ** ğŸ˜Š

è¿™å°±æ˜¯"å¯å‘å¼ç®—æ³•"å®ç°å¸ƒé²å§†è®¤çŸ¥ç¼–ç å’Œä¿¡æ¯å¢ç›Šæ¨ç®—çš„å…¨éƒ¨ç§˜å¯†ï¼

## ğŸ’¡ æ ¸å¿ƒç†è§£

### ä¸‰ä¸ªå±‚æ¬¡çš„æ•°æ®å¤„ç†

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å±‚æ¬¡1ï¼šåç«¯APIï¼ˆéœ€è¦LLMï¼‰             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - è´¨é‡è¯„ä¼°ï¼ˆç›¸å…³æ€§ã€æ¯’æ€§ç­‰ï¼‰          â”‚
â”‚ - æµç¨‹åˆ†æï¼ˆé—®é¢˜ç±»å‹åˆ†ç±»ï¼‰            â”‚
â”‚                                       â”‚
â”‚ è¿™éƒ¨åˆ†å·²ç»å®Œæˆ âœ“                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â†“ è¿”å›ç»“æ„åŒ–æ•°æ®
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å±‚æ¬¡2ï¼šå‰ç«¯æ˜ å°„ï¼ˆæŸ¥è¡¨ï¼‰               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - é—®é¢˜ç±»å‹ â†’ å¸ƒé²å§†å±‚çº§               â”‚
â”‚ - ç®€å•å­—å…¸æ˜ å°„                        â”‚
â”‚ - æ— éœ€AIï¼Œæ— éœ€API                    â”‚
â”‚                                       â”‚
â”‚ è®¡ç®—æ—¶é—´ï¼š<10ms âœ“                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â†“ 
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å±‚æ¬¡3ï¼šå‰ç«¯æ•°å­¦è®¡ç®—ï¼ˆå…¬å¼ï¼‰           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - Påˆ†å¸ƒï¼šå½’ä¸€åŒ–ç»Ÿè®¡æ•°æ®               â”‚
â”‚ - Qåˆ†å¸ƒï¼šé¢„å®šä¹‰åŸºçº¿                   â”‚
â”‚ - KLæ•£åº¦ï¼šâˆ‘PÃ—log(P/Q)                â”‚
â”‚ - ä¿¡æ¯å¢ç›Šï¼šDKL Ã— R Ã— C               â”‚
â”‚                                       â”‚
â”‚ çº¯æ•°å­¦è¿ç®—ï¼Œæ— éœ€AIï¼Œæ— éœ€API âœ“        â”‚
â”‚ è®¡ç®—æ—¶é—´ï¼š<20ms âœ“                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å…³é”®æ´å¯Ÿ

1. **å¸ƒé²å§†è®¤çŸ¥ç¼–ç **
   - âœ… å·²æœ‰æ•°æ®ï¼šquestion_typeï¼ˆæ¥è‡ªæµç¨‹åˆ†æï¼‰
   - ğŸ”„ å‰ç«¯å¤„ç†ï¼šå­—å…¸æ˜ å°„
   - âŒ ä¸éœ€è¦ï¼šé¢å¤–APIè°ƒç”¨

2. **ä¿¡æ¯å¢ç›Šæ¨ç®—**
   - âœ… å·²æœ‰æ•°æ®1ï¼šquestion_type_countsï¼ˆæ¥è‡ªæµç¨‹åˆ†æï¼‰
   - âœ… å·²æœ‰æ•°æ®2ï¼šrelevancy, toxicityï¼ˆæ¥è‡ªè´¨é‡è¯„ä¼°ï¼‰
   - ğŸ”„ å‰ç«¯å¤„ç†ï¼šæ•°å­¦å…¬å¼ï¼ˆKLæ•£åº¦ï¼‰
   - âŒ ä¸éœ€è¦ï¼šé¢å¤–APIè°ƒç”¨

3. **ä¸ºä»€ä¹ˆä¸éœ€è¦LLMï¼Ÿ**
   - KLæ•£åº¦æ˜¯çº¯æ•°å­¦å…¬å¼ï¼Œæœ‰ç¡®å®šæ€§ç®—æ³•
   - ä¸æ¶‰åŠè‡ªç„¶è¯­è¨€ç†è§£
   - ä¸éœ€è¦è¯­ä¹‰åˆ†æ
   - åªéœ€è¦ç»Ÿè®¡å’Œæ•°å­¦è¿ç®—

---

## ï¿½ï¿½ æ€»ç»“

### å¯å‘å¼ç®—æ³•çš„ç²¾é«“

**å¤ç”¨ç°æœ‰APIè¿”å›çš„æ•°æ® + å‰ç«¯è®¡ç®— = 0é¢å¤–æˆæœ¬**

### æ•°æ®ä¾èµ–æ¸…å•

| åŠŸèƒ½ | ä¾èµ–æ•°æ® | æ¥æºAPI | é¢å¤–APIï¼Ÿ |
|------|---------|---------|----------|
| å¸ƒé²å§†è®¤çŸ¥ç¼–ç  | question_type | /api/analyze-flow | âŒ |
| ä¿¡æ¯å¢ç›Š - Påˆ†å¸ƒ | question_type_counts | /api/analyze-flow | âŒ |
| ä¿¡æ¯å¢ç›Š - Qåˆ†å¸ƒ | æ— ï¼ˆé¢„å®šä¹‰ï¼‰ | - | âŒ |
| ä¿¡æ¯å¢ç›Š - KLæ•£åº¦ | P, Q | å‰ç«¯è®¡ç®— | âŒ |
| ä¿¡æ¯å¢ç›Š - Rå› å­ | relevancy.score | /api/evaluate-quality | âŒ |
| ä¿¡æ¯å¢ç›Š - Cå› å­ | toxicity.score | /api/evaluate-quality | âŒ |

**æ€»è®¡ï¼š0ä¸ªé¢å¤–APIè°ƒç”¨ï¼**

### æ€§èƒ½å¯¹æ¯”

| æŒ‡æ ‡ | å¯å‘å¼ç®—æ³• | LLMæ–¹æ¡ˆ |
|------|-----------|---------|
| APIè°ƒç”¨ | 0 | 10-20 |
| è®¡ç®—æ—¶é—´ | <30ms | 30-60s |
| å‡†ç¡®ç‡ | 75-85% | 90-95% |
| æˆæœ¬ | Â¥0 | Â¥0.1-0.5 |
| RPMé™åˆ¶ | æ—  | ä¸¥æ ¼ |
| ç”¨æˆ·ä½“éªŒ | å³æ—¶ | ç­‰å¾… |

---

## ğŸš€ å®æ–½å»ºè®®

1. **ç«‹å³å¯ç”¨**ï¼šè¿™å¥—ç®—æ³•å·²ç»åœ¨Demoé¡µé¢å®ç°å¹¶è¿è¡Œ
2. **é›†æˆç®€å•**ï¼šåªéœ€å¤åˆ¶ BloomTaxonomyCard å’Œ InfoGainCard åˆ° Dashboard
3. **0é£é™©**ï¼šçº¯å‰ç«¯è®¡ç®—ï¼Œä¸ä¼šå½±å“åç«¯API
4. **å³æ—¶å“åº”**ï¼šç”¨æˆ·çœ‹åˆ°è´¨é‡è¯„ä¼°å’Œæµç¨‹åˆ†æç»“æœçš„åŒæ—¶ï¼Œç«‹å³çœ‹åˆ°å¸ƒé²å§†å’Œä¿¡æ¯å¢ç›Š

**ç°åœ¨æ˜ç™½äº†å—ï¼Ÿ** ğŸ˜Š

è¿™å°±æ˜¯"å¯å‘å¼ç®—æ³•"å®ç°å¸ƒé²å§†è®¤çŸ¥ç¼–ç å’Œä¿¡æ¯å¢ç›Šæ¨ç®—çš„å…¨éƒ¨ç§˜å¯†ï¼
